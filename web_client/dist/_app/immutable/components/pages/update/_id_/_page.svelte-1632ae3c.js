import{S as ct,i as ft,s as dt,k as u,l as c,m as b,h as d,n as E,b as X,t as st,d as _t,f as at,N as it,O as q,G as ht,o as pt,g as bt,q as w,a as T,r as H,c as D,F as e,I as U,A as W,M as P,J as lt,K as mt}from"../../../../chunks/index-f7b1ee1a.js";import{a as rt,f as nt}from"../../../../chunks/index-5d397866.js";import{d as ot}from"../../../../chunks/database-4df4be65.js";import{p as vt}from"../../../../chunks/stores-3789b9d0.js";function kt(k){let t,s,r,f,l,p,o,_,a,n,i,O;return{c(){t=u("div"),s=u("header"),r=u("h1"),f=w("Task not found"),l=T(),p=u("hr"),o=T(),_=u("div"),a=u("button"),n=w("Back"),this.h()},l(v){t=c(v,"DIV",{class:!0});var m=b(t);s=c(m,"HEADER",{});var R=b(s);r=c(R,"H1",{});var A=b(r);f=H(A,"Task not found"),A.forEach(d),R.forEach(d),l=D(m),p=c(m,"HR",{}),o=D(m),_=c(m,"DIV",{class:!0});var g=b(_);a=c(g,"BUTTON",{class:!0});var L=b(a);n=H(L,"Back"),L.forEach(d),g.forEach(d),m.forEach(d),this.h()},h(){E(a,"class","col"),E(_,"class","row"),E(t,"class","card text-center")},m(v,m){X(v,t,m),e(t,s),e(s,r),e(r,f),e(t,l),e(t,p),e(t,o),e(t,_),e(_,a),e(a,n),i||(O=U(a,"click",ut),i=!0)},p:W,i:W,o:W,d(v){v&&d(t),i=!1,O()}}}function yt(k){let t,s,r,f,l,p,o,_,a,n,i,O,v,m,R,A,g,L,z,F,I,B,j,J,N,K,S,V,Q,Y;return{c(){t=u("form"),s=u("h1"),r=w("Edit Task"),f=T(),l=u("hr"),p=T(),o=u("label"),_=u("strong"),a=w("Task"),n=T(),i=u("input"),O=T(),v=u("label"),m=u("strong"),R=w("Due"),A=T(),g=u("input"),L=T(),z=u("br"),F=T(),I=u("div"),B=u("button"),j=w("Cancel"),J=T(),N=u("button"),K=w("Add"),this.h()},l(y){t=c(y,"FORM",{class:!0});var h=b(t);s=c(h,"H1",{});var Z=b(s);r=H(Z,"Edit Task"),Z.forEach(d),f=D(h),l=c(h,"HR",{}),p=D(h),o=c(h,"LABEL",{});var C=b(o);_=c(C,"STRONG",{});var x=b(_);a=H(x,"Task"),x.forEach(d),n=D(C),i=c(C,"INPUT",{type:!0}),C.forEach(d),O=D(h),v=c(h,"LABEL",{});var G=b(v);m=c(G,"STRONG",{});var $=b(m);R=H($,"Due"),$.forEach(d),A=D(G),g=c(G,"INPUT",{type:!0}),G.forEach(d),L=D(h),z=c(h,"BR",{}),F=D(h),I=c(h,"DIV",{class:!0});var M=b(I);B=c(M,"BUTTON",{class:!0,type:!0});var tt=b(B);j=H(tt,"Cancel"),tt.forEach(d),J=D(M),N=c(M,"BUTTON",{class:!0,type:!0});var et=b(N);K=H(et,"Add"),et.forEach(d),M.forEach(d),h.forEach(d),this.h()},h(){E(i,"type","text"),i.autofocus=!0,E(g,"type","datetime-local"),E(B,"class","col"),E(B,"type","reset"),E(N,"class","col"),E(N,"type","submit"),E(I,"class","row"),E(t,"class","card")},m(y,h){X(y,t,h),e(t,s),e(s,r),e(t,f),e(t,l),e(t,p),e(t,o),e(o,_),e(_,a),e(o,n),e(o,i),P(i,k[0].task),e(t,O),e(t,v),e(v,m),e(m,R),e(v,A),e(v,g),P(g,k[1]),e(t,L),e(t,z),e(t,F),e(t,I),e(I,B),e(B,j),e(I,J),e(I,N),e(N,K),V=!0,i.focus(),Q||(Y=[U(i,"input",k[3]),U(g,"input",k[4]),U(t,"reset",lt(ut)),U(t,"submit",lt(k[2]))],Q=!0)},p(y,h){h&1&&i.value!==y[0].task&&P(i,y[0].task),h&2&&P(g,y[1])},i(y){V||(it(()=>{S||(S=q(t,nt,{y:-100},!0)),S.run(1)}),V=!0)},o(y){S||(S=q(t,nt,{y:-100},!1)),S.run(0),V=!1},d(y){y&&d(t),y&&S&&S.end(),Q=!1,mt(Y)}}}function Et(k){let t,s,r,f,l;const p=[yt,kt],o=[];function _(a,n){return a[0]?0:1}return s=_(k),r=o[s]=p[s](k),{c(){t=u("div"),r.c(),this.h()},l(a){t=c(a,"DIV",{class:!0});var n=b(t);r.l(n),n.forEach(d),this.h()},h(){E(t,"class","background svelte-1l75hzj")},m(a,n){X(a,t,n),o[s].m(t,null),l=!0},p(a,[n]){let i=s;s=_(a),s===i?o[s].p(a,n):(bt(),st(o[i],1,1,()=>{o[i]=null}),_t(),r=o[s],r?r.p(a,n):(r=o[s]=p[s](a),r.c()),at(r,1),r.m(t,null))},i(a){l||(at(r),it(()=>{f||(f=q(t,rt,{},!0)),f.run(1)}),l=!0)},o(a){st(r),f||(f=q(t,rt,{},!1)),f.run(0),l=!1},d(a){a&&d(t),o[s].d(),a&&f&&f.end()}}}function ut(){history.back()}function gt(k,t,s){let r;ht(k,vt,n=>s(5,r=n));let f=r.params.id,l,p="";pt(async()=>{s(0,l=await ot.tasks.get(f));let n=new Date((l==null?void 0:l.due)||0),i=n.getTimezoneOffset(),O=new Date(n.getTime()-i*60*1e3);s(1,p=O.toISOString().slice(0,16))});async function o(){if(l){let n=new Date(p);s(0,l.due=n.toISOString(),l),s(0,l.synced=!1,l),await ot.tasks.update(l.id,l),history.back()}}function _(){l.task=this.value,s(0,l)}function a(){p=this.value,s(1,p)}return[l,p,o,_,a]}class St extends ct{constructor(t){super(),ft(this,t,gt,Et,dt,{})}}export{St as default};
