import{S as oe,i as ie,s as ue,k as l,q as N,a as g,l as n,m as f,r as M,h as u,c as b,n as _,b as ce,F as t,M as L,I as H,J as se,N as le,O as P,K as fe,o as de}from"../../../chunks/index-f7b1ee1a.js";import{f as ne,a as re}from"../../../chunks/index-5d397866.js";import{d as pe}from"../../../chunks/database-4df4be65.js";let _e=(o=21)=>crypto.getRandomValues(new Uint8Array(o)).reduce((a,e)=>(e&=63,e<36?a+=e.toString(36):e<62?a+=(e-26).toString(36).toUpperCase():e>62?a+="-":a+="_",a),"");function he(o){let a,e,s,d,w,O,A,p,y,V,q,c,z,T,I,F,G,k,j,J,K,h,D,Q,W,E,X,m,v,R,Y,Z;return{c(){a=l("div"),e=l("form"),s=l("h1"),d=N("Add Task"),w=g(),O=l("hr"),A=g(),p=l("label"),y=l("strong"),V=N("Task"),q=g(),c=l("input"),z=g(),T=l("label"),I=l("strong"),F=N("Due"),G=g(),k=l("input"),j=g(),J=l("br"),K=g(),h=l("div"),D=l("button"),Q=N("Cancel"),W=g(),E=l("button"),X=N("Add"),this.h()},l(r){a=n(r,"DIV",{class:!0});var S=f(a);e=n(S,"FORM",{class:!0});var i=f(e);s=n(i,"H1",{});var $=f(s);d=M($,"Add Task"),$.forEach(u),w=b(i),O=n(i,"HR",{}),A=b(i),p=n(i,"LABEL",{});var U=f(p);y=n(U,"STRONG",{});var x=f(y);V=M(x,"Task"),x.forEach(u),q=b(U),c=n(U,"INPUT",{type:!0}),U.forEach(u),z=b(i),T=n(i,"LABEL",{});var B=f(T);I=n(B,"STRONG",{});var ee=f(I);F=M(ee,"Due"),ee.forEach(u),G=b(B),k=n(B,"INPUT",{type:!0}),B.forEach(u),j=b(i),J=n(i,"BR",{}),K=b(i),h=n(i,"DIV",{class:!0});var C=f(h);D=n(C,"BUTTON",{class:!0,type:!0});var te=f(D);Q=M(te,"Cancel"),te.forEach(u),W=b(C),E=n(C,"BUTTON",{class:!0,type:!0});var ae=f(E);X=M(ae,"Add"),ae.forEach(u),C.forEach(u),i.forEach(u),S.forEach(u),this.h()},h(){_(c,"type","text"),c.autofocus=!0,_(k,"type","datetime-local"),_(D,"class","col"),_(D,"type","reset"),_(E,"class","col"),_(E,"type","submit"),_(h,"class","row"),_(e,"class","card"),_(a,"class","background svelte-1l75hzj")},m(r,S){ce(r,a,S),t(a,e),t(e,s),t(s,d),t(e,w),t(e,O),t(e,A),t(e,p),t(p,y),t(y,V),t(p,q),t(p,c),L(c,o[0]),t(e,z),t(e,T),t(T,I),t(I,F),t(T,G),t(T,k),L(k,o[1]),t(e,j),t(e,J),t(e,K),t(e,h),t(h,D),t(D,Q),t(h,W),t(h,E),t(E,X),R=!0,c.focus(),Y||(Z=[H(c,"input",o[3]),H(k,"input",o[4]),H(e,"reset",se(ve)),H(e,"submit",se(o[2]))],Y=!0)},p(r,[S]){S&1&&c.value!==r[0]&&L(c,r[0]),S&2&&L(k,r[1])},i(r){R||(le(()=>{m||(m=P(e,ne,{y:-100},!0)),m.run(1)}),le(()=>{v||(v=P(a,re,{},!0)),v.run(1)}),R=!0)},o(r){m||(m=P(e,ne,{y:-100},!1)),m.run(0),v||(v=P(a,re,{},!1)),v.run(0),R=!1},d(r){r&&u(a),r&&m&&m.end(),r&&v&&v.end(),Y=!1,fe(Z)}}}function me(){let o=new Date,a=o.getTimezoneOffset(),e=new Date(o.getTime()-a*60*1e3),s=new Date(e.getTime()+2*24*60*60*1e3);return s.setMinutes(Math.ceil(s.getMinutes()/5)*5),s.toISOString().slice(0,16)}function ve(){history.back()}function ge(o,a,e){let s="",d="";de(()=>{e(1,d=me())});async function w(){let p=new Date(d),y={id:_e(),task:s,done:!1,synced:!1,due:p.toISOString()};await pe.tasks.add(y),history.back()}function O(){s=this.value,e(0,s)}function A(){d=this.value,e(1,d)}return[s,d,w,O,A]}class ke extends oe{constructor(a){super(),ie(this,a,ge,he,ue,{})}}export{ke as default};
