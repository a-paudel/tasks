import{S as R,i as U,s as q,l as v,m as y,n as T,h as m,p as k,b as N,G as h,M as X,H as C,N as at,E as V,O as nt,P as ct,e as Y,g as dt,Q as ut,d as ft,f as S,t as A,L as ht,o as pt,a as D,r as L,c as H,u as O,R as Z,v as _t,T as mt,U as kt,V as gt,W as st,X as rt,Y as vt,Z as yt,w as j,x as z,y as J,B as K}from"../chunks/index-503ae1fb.js";import{c as $t,a as Tt,f as bt}from"../chunks/index-18fde6d0.js";import{t as E}from"../chunks/stores-7ad03b58.js";import{a as M}from"../chunks/client-26249892.js";import"../chunks/index-872bb42c.js";function wt(d){let t,e,n,c;return{c(){t=v("form"),e=v("input"),this.h()},l(i){t=y(i,"FORM",{});var o=T(t);e=y(o,"INPUT",{type:!0,class:!0,placeholder:!0}),o.forEach(m),this.h()},h(){k(e,"type","text"),k(e,"class","input input-bordered w-full"),k(e,"placeholder","New Task...")},m(i,o){N(i,t,o),h(t,e),X(e,d[0]),n||(c=[C(e,"input",d[2]),C(t,"submit",at(d[1]))],n=!0)},p(i,[o]){o&1&&e.value!==i[0]&&X(e,i[0])},i:V,o:V,d(i){i&&m(t),n=!1,nt(c)}}}function Et(d,t,e){let n="";async function c(){if(n.length>0)try{let o=await M.task.createTaskApiTasksPost({taskCreateInput:{task:n}});E.update(a=>[o].concat(a)),e(0,n="")}catch{alert("Error adding task.")}}function i(){n=this.value,e(0,n)}return[n,c,i]}class It extends R{constructor(t){super(),U(this,t,Et,wt,q,{})}}function xt(d,{from:t,to:e},n={}){const c=getComputedStyle(d),i=c.transform==="none"?"":c.transform,[o,a]=c.transformOrigin.split(" ").map(parseFloat),r=t.left+t.width*o/e.width-(e.left+o),l=t.top+t.height*a/e.height-(e.top+a),{delay:u=0,duration:s=p=>Math.sqrt(p)*120,easing:f=$t}=n;return{delay:u,duration:ct(s)?s(Math.sqrt(r*r+l*l)):s,easing:f,css:(p,$)=>{const b=$*r,I=$*l,x=p+$*t.width/e.width,w=p+$*t.height/e.height;return`transform: ${i} translate(${b}px, ${I}px) scale(${x}, ${w});`}}}function tt(d,t,e){const n=d.slice();return n[8]=t[e],n[9]=t,n[10]=e,n}function et(d,t){let e,n,c,i,o,a,r=t[8].task+"",l,u,s,f,p,$,b,I,x=V,w,P,B;function it(){t[5].call(n,t[9],t[10])}function ot(){return t[6](t[8])}function lt(){return t[7](t[8])}return{key:d,first:null,c(){e=v("div"),n=v("input"),c=D(),i=v("div"),o=v("div"),a=v("h2"),l=L(r),u=D(),s=v("div"),f=L("Delete"),p=D(),this.h()},l(g){e=y(g,"DIV",{class:!0});var _=T(e);n=y(_,"INPUT",{type:!0,class:!0}),c=H(_),i=y(_,"DIV",{class:!0});var F=T(i);o=y(F,"DIV",{class:!0});var G=T(o);a=y(G,"H2",{});var Q=T(a);l=O(Q,r),Q.forEach(m),G.forEach(m),F.forEach(m),u=H(_),s=y(_,"DIV",{class:!0});var W=T(s);f=O(W,"Delete"),W.forEach(m),p=H(_),_.forEach(m),this.h()},h(){k(n,"type","checkbox"),k(n,"class","checkbox"),k(o,"class","card-title"),Z(o,"line-through",t[8].done),k(i,"class","card-body"),k(s,"class","btn bg-red-800"),k(e,"class","card bg-base-200 flex flex-row items-center px-5"),this.first=e},m(g,_){N(g,e,_),h(e,n),n.checked=t[8].done,h(e,c),h(e,i),h(i,o),h(o,a),h(a,l),h(e,u),h(e,s),h(s,f),h(e,p),w=!0,P||(B=[C(n,"change",it),C(n,"click",at(ot)),C(s,"click",lt)],P=!0)},p(g,_){t=g,_&1&&(n.checked=t[8].done),(!w||_&1)&&r!==(r=t[8].task+"")&&_t(l,r),_&1&&Z(o,"line-through",t[8].done)},r(){I=e.getBoundingClientRect()},f(){mt(e),x(),kt(e,I)},a(){x(),x=gt(e,I,xt,{duration:500})},i(g){w||(st(()=>{b&&b.end(1),$=rt(e,t[2],{key:t[8].id}),$.start()}),w=!0)},o(g){$&&$.invalidate(),b=vt(e,t[1],{key:t[8].id}),w=!1},d(g){g&&m(e),g&&b&&b.end(),P=!1,nt(B)}}}function Ct(d){let t=[],e=new Map,n,c,i=d[0];const o=a=>a[8].id;for(let a=0;a<i.length;a+=1){let r=tt(d,i,a),l=o(r);e.set(l,t[a]=et(l,r))}return{c(){for(let a=0;a<t.length;a+=1)t[a].c();n=Y()},l(a){for(let r=0;r<t.length;r+=1)t[r].l(a);n=Y()},m(a,r){for(let l=0;l<t.length;l+=1)t[l].m(a,r);N(a,n,r),c=!0},p(a,[r]){if(r&25){i=a[0],dt();for(let l=0;l<t.length;l+=1)t[l].r();t=ut(t,r,o,1,a,i,e,n.parentNode,yt,et,n,tt);for(let l=0;l<t.length;l+=1)t[l].a();ft()}},i(a){if(!c){for(let r=0;r<i.length;r+=1)S(t[r]);c=!0}},o(a){for(let r=0;r<t.length;r+=1)A(t[r]);c=!1},d(a){for(let r=0;r<t.length;r+=1)t[r].d(a);a&&m(n)}}}function Dt(d,t,e){let n;ht(d,E,s=>e(0,n=s));const[c,i]=Tt({duration:500});pt(async()=>{let s=await M.task.listTasksApiTasksGet();s.length>0&&E.set(s)});async function o(s){try{await M.task.updateTaskApiTasksIdPut({id:s.id,taskUpdateInput:{done:!s.done}}),E.update(f=>f.map(p=>p.id===s.id?{...p,done:!s.done}:p))}catch{alert("Error toggling task.")}}async function a(s){try{await M.task.deleteTaskApiTasksIdDelete({id:s.id}),E.update(f=>f.filter(p=>p.id!==s.id))}catch{alert("Error deleting task.")}}function r(s,f){s[f].done=this.checked,E.set(n)}const l=s=>o(s),u=s=>a(s);return d.$$.update=()=>{d.$$.dirty&1&&n.sort((s,f)=>s.done===f.done?f.id-s.id:s.done?1:-1)},[n,c,i,o,a,r,l,u]}class Ht extends R{constructor(t){super(),U(this,t,Dt,Ct,q,{})}}function Mt(d){let t,e,n,c,i,o,a,r,l;return i=new It({}),a=new Ht({}),{c(){t=v("div"),e=v("h1"),n=L("Tasks"),c=D(),j(i.$$.fragment),o=D(),j(a.$$.fragment),this.h()},l(u){t=y(u,"DIV",{class:!0});var s=T(t);e=y(s,"H1",{class:!0});var f=T(e);n=O(f,"Tasks"),f.forEach(m),c=H(s),z(i.$$.fragment,s),o=H(s),z(a.$$.fragment,s),s.forEach(m),this.h()},h(){k(e,"class","text-4xl font-extralight text-center"),k(t,"class","flex flex-col gap-5")},m(u,s){N(u,t,s),h(t,e),h(e,n),h(t,c),J(i,t,null),h(t,o),J(a,t,null),l=!0},p:V,i(u){l||(S(i.$$.fragment,u),S(a.$$.fragment,u),r||st(()=>{r=rt(t,bt,{}),r.start()}),l=!0)},o(u){A(i.$$.fragment,u),A(a.$$.fragment,u),l=!1},d(u){u&&m(t),K(i),K(a)}}}class Lt extends R{constructor(t){super(),U(this,t,null,Mt,q,{})}}export{Lt as default};
